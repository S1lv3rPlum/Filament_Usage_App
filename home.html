<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Filament Tracker</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#007acc" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>Filament Tracker</h1>
  </header>

<main id="home">
  <button onclick="showScreen('addSpool')">â• Add New Spool</button>
  <button onclick="showScreen('library')">ğŸ“¦ View Inventory</button>
  <button onclick="showScreen('history')">ğŸ“œ Usage History</button>
  <button onclick="showScreen('tracking')">ğŸ¯ Start Tracking</button>
  <button onclick="showScreen('analytics')">ğŸ“Š Analytics</button>
  <button onclick="showScreen('settings')">âš™ï¸ Settings</button>
</main>



 <section id="addSpool" class="hidden">
  <h2>Add New Spool</h2>
  <input id="brand" placeholder="Brand" />
  <input id="color" placeholder="Color" />
  
  <select id="materialSelect" onchange="handleMaterialChange()" style="padding: 10px; font-size: 1em; border-radius: 4px; border: 1px solid #ccc; width: 100%; box-sizing: border-box; margin-bottom: 10px;">
    <!-- Options inserted dynamically -->
  </select>
  
  <input
    type="text"
    id="customMaterialInput"
    placeholder="Enter custom material"
    class="hidden"
    style="padding: 10px; font-size: 1em; border-radius: 4px; border: 1px solid #ccc; width: 100%; box-sizing: border-box; margin-bottom: 10px;"
  />
  
  <input id="length" type="number" placeholder="Length (m)" />
  <input id="weight" type="number" placeholder="Weight (g)" />
  <button onclick="saveSpool()">Save Spool</button>
  <button onclick="showScreen('home')">â¬… Back</button>
</section>

  <!-- Inventory Screen -->
  <section id="library" class="hidden">
    <h2>Spool Library</h2>
    <ul id="spoolList"></ul>
    <button onclick="showScreen('home')">â¬… Back</button>
  </section>

<section id="history" class="hidden">
  <h2>Usage History</h2>

  <div id="historyFilters" style="margin-bottom: 15px;">
    <label>
      Start Date:
      <input type="date" id="filterStartDate" />
    </label>

    <label style="margin-left: 10px;">
      End Date:
      <input type="date" id="filterEndDate" />
    </label>

    <label style="margin-left: 10px;">
      Spool:
      <select id="filterSpool">
        <option value="">All Spools</option>
        <!-- Options populated dynamically -->
      </select>
    </label>

    <button id="filterButton" style="margin-left: 10px;">Filter</button>
    <button id="clearFilterButton" style="margin-left: 5px;">Clear</button>
  </div>

  <ul id="historyList"></ul>
  <button onclick="showScreen('home')">â¬… Back</button>
</section>


  <!-- Tracking / Print Jobs Screen -->
<section id="tracking" class="hidden">
  <h2>Print Job Tracking</h2>

  <!-- Start Print Form -->
 <section id="startPrintSection">
  <h2>Start Print Job</h2>
  <input id="jobName" placeholder="Enter print job name (optional)" />
  <label for="selectSpools">Select Spools (multi-select):</label>
  <select id="selectSpools" multiple size="5" style="width: 100%;"></select>
  <div id="startWeightsContainer"></div>
  <button onclick="startPrintJob()">Start Print</button>
  <button onclick="showScreen('home')">â¬… Back</button>
  
</section>

<section id="endPrintSection" class="hidden">
  <h3 id="activeJobName"></h3>
  <div id="endWeightsContainer"></div>
  <button onclick="endPrintJob()">End Print</button>
  <button onclick="cancelActiveJob()">Cancel Job</button>
  <button onclick="showScreen('home')">â¬… Back</button>
</section>
</section>

<!--  Analytics screen -->
<section id="analytics" class="hidden" style="height:400px; position:relative;">
  <h2>Analytics</h2>
  <canvas id="usageChart"></canvas>
  <button onclick="showScreen('home')">â¬… Back</button>
</section>
  
  
  <!-- Settings Screen -->
<section id="settings" class="hidden">
  <h2>Settings</h2>
  <button id="checkUpdatesBtn">Check for Updates</button>
  <button onclick="showScreen('home')">â¬… Back</button>
</section>
  
  

  <footer id="footer">Â© Data Forge</footer>


  <script src="home.js"></script>
</body>
</html>